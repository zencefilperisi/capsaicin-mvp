<!DOCTYPE html>
<html>
<head>
  <title>CAPSAICIN - GiriÅŸ</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h1>ğŸŒ¶ï¸ CAPSAICIN</h1>
    <p><strong>Kapsaisin GÃ¼cÃ¼yle Savunma</strong></p>

    <form id="loginForm">
      <input type="text" name="username" placeholder="KullanÄ±cÄ± adÄ±" required><br>
      <input type="password" name="password" placeholder="Åifre" required><br>
      <button type="submit">GiriÅŸ Yap</button>
    </form>

    <div id="result"></div>

    <br>
    <p>HesabÄ±n yok mu? <a href="/register">KayÄ±t Ol</a></p>
  </div>

  <script>
    document.getElementById('loginForm').onsubmit = async (e) => {
      e.preventDefault();
      const form = new FormData(e.target);
      const res = await fetch('/login', { method: 'POST', body: form });
      const data = await res.json();

      if (data.success && data.redirect) {
        window.location.href = data.redirect;
      } else {
        document.getElementById('result').innerHTML = 
          `<p style="color:red">${data.error}</p>`;
      }
    };
  </script>
</body>
</html>